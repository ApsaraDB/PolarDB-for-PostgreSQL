<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/PolarDB-for-PostgreSQL/favicon.ico"><title>Buffer Management | PolarDB for PostgreSQL</title><meta name="description" content="A cloud-native database developed by Alibaba Cloud">
    <link rel="preload" href="/PolarDB-for-PostgreSQL/assets/style-CZypOIGB.css" as="style"><link rel="stylesheet" href="/PolarDB-for-PostgreSQL/assets/style-CZypOIGB.css">
    <link rel="modulepreload" href="/PolarDB-for-PostgreSQL/assets/app-HZE5kvva.js"><link rel="modulepreload" href="/PolarDB-for-PostgreSQL/assets/buffer-management.html-BfUwAfNf.js"><link rel="modulepreload" href="/PolarDB-for-PostgreSQL/assets/9_future_pages-BcUohDxW.js">
    <link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-B6qRSMft.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/coding-style.html-DXLcY6ZO.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/contributing-polardb-docs.html-DQQp-mCm.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/contributing-polardb-kernel.html-Q8ymAn9X.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/trouble-issuing.html-wh4RKj1W.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/db-localfs.html-DD9DEWOV.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/db-pfs.html-CxZW48mi.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/deploy-official.html-D_FpT8dX.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/deploy.html-D7jtwzV6.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/fs-pfs.html-C9Qs-oAA.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/introduction.html-Kk9j9x_6.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/quick-start.html-CRU9sAvv.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/storage-aliyun-essd.html-C5833qHu.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/customize-dev-env.html-DPYPkhLk.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/dev-on-docker.html-CczQbplB.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/backup-and-restore.html-Bq1hPQeJ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/grow-storage.html-D8d3Jy0A.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/ro-online-promote.html-CDFvf9kI.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/scale-out.html-CvBgyRJT.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/tpcc-test.html-D3gB6oGp.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/tpch-test.html-CnMh-IRc.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-CsmeiAVN.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/analyze.html-BQBWWm3U.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/arch-htap.html-C9_Z0ieO.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/arch-overview.html-B5XisJrt.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/ddl-synchronization.html-Mhfy6N2K.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/logindex.html-9MQGSOrs.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/polar-sequence-tech.html-38Ut2Rbn.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-9UBIO3IR.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/coding-style.html-wHwF4uxV.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/contributing-polardb-docs.html-BfvkmcED.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/contributing-polardb-kernel.html-DZgPOQ5F.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/trouble-issuing.html-vvJw94_H.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/db-localfs.html-DboS4LXM.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/db-pfs.html-DLlx2p9p.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/deploy-official.html-h8M4qZxD.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/deploy.html-Dx_krvTu.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/fs-pfs.html-CBlo0s3X.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/introduction.html-BF_GAmmQ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/quick-start.html-CAnWaTVO.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/storage-aliyun-essd.html-BEm4Rxne.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/customize-dev-env.html-C7Kn3O4T.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/dev-on-docker.html-ClS4y2Cl.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html--4-qT3RM.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/backup-and-restore.html-DfXNNCZQ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/cpu-usage-high.html-BOzZU4Br.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/grow-storage.html-DB4S1RYb.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/ro-online-promote.html-DrMgfRHR.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/scale-out.html-CZhfhfsH.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/tpcc-test.html-lJGgg_qm.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/tpch-test.html-D3gku1Uu.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-qsN2cf9S.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/analyze.html-jMqJjdKx.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/arch-htap.html-pSW2wAS5.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/arch-overview.html-Dta4ev40.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/buffer-management.html-CEpZyweU.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/ddl-synchronization.html-DsXZIU76.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/logindex.html-DYhE4686.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/polar-sequence-tech.html-Qr9V0-xR.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-CK2YMnf2.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/avail-online-promote.html-DaruCOFx.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/avail-parallel-replay.html-T4Km-FJ0.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/datamax.html-m-DCAnO5.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/flashback-table.html-D3jHPWPd.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/resource-manager.html-BKg6cPiR.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-CCeLr1fa.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/adaptive-scan.html-Hn7e_qGQ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/cluster-info.html-BGfEnvwg.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/epq-create-btree-index.html-B3hjZ00n.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/epq-ctas-mtview-bulk-insert.html-BflYX6aE.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/epq-explain-analyze.html-BA5vVOmZ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/epq-node-and-dop.html-C-yrcj6j.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/epq-partitioned-table.html-CNjS-Xco.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/parallel-dml.html-81v6kkm1.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-C-rZfeVY.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/pgvector.html-BaJ1MKRZ.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/smlar.html-BjJwEf8D.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-CH9L26VP.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/bulk-read-and-extend.html-0vikHeve.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/rel-size-cache.html-DXNozYj6.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/shared-server.html-CWnFp088.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index.html-C6rOANrz.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/polar_login_history.html-CPcnyw4t.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/tde.html-N9JSvrlm.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/404.html-BSUEBMCR.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/index-B-M8YVCw.js" as="script"><link rel="prefetch" href="/PolarDB-for-PostgreSQL/assets/ArticleInfo-ffuFdlm4.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/PolarDB-for-PostgreSQL/"><img class="vp-site-logo" src="/PolarDB-for-PostgreSQL/images/polardb.png" alt="PolarDB for PostgreSQL"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">PolarDB for PostgreSQL</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Deployment"><span class="title">Deployment</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Deployment"><span class="title">Deployment</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/introduction.html" aria-label="架构简介"><!--[--><!--[--><!--]--><!--]-->架构简介<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/quick-start.html" aria-label="快速部署"><!--[--><!--[--><!--]--><!--]-->快速部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/deploy.html" aria-label="进阶部署"><!--[--><!--[--><!--]--><!--]-->进阶部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Preparation of Shared-Storage Device</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/storage-aliyun-essd.html" aria-label="阿里云 ECS + ESSD 云盘存储"><!--[--><!--[--><!--]--><!--]-->阿里云 ECS + ESSD 云盘存储<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Preparation of File System</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/fs-pfs.html" aria-label="格式化并挂载 PFS"><!--[--><!--[--><!--]--><!--]-->格式化并挂载 PFS<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Deploying PolarDB</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/db-localfs.html" aria-label="基于单机文件系统部署"><!--[--><!--[--><!--]--><!--]-->基于单机文件系统部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/db-pfs.html" aria-label="基于 PFS 文件系统部署"><!--[--><!--[--><!--]--><!--]-->基于 PFS 文件系统部署<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>More about Deployment</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/deploy-official.html" aria-label="购买商业版"><!--[--><!--[--><!--]--><!--]-->购买商业版<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Ops"><span class="title">Ops</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Ops"><span class="title">Ops</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Daily Ops</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/backup-and-restore.html" aria-label="备份恢复"><!--[--><!--[--><!--]--><!--]-->备份恢复<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/grow-storage.html" aria-label="共享存储在线扩容"><!--[--><!--[--><!--]--><!--]-->共享存储在线扩容<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/scale-out.html" aria-label="计算节点扩缩容"><!--[--><!--[--><!--]--><!--]-->计算节点扩缩容<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/ro-online-promote.html" aria-label="Replica 节点在线 Promote"><!--[--><!--[--><!--]--><!--]-->Replica 节点在线 Promote<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Benchmarks</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/tpcc-test.html" aria-label="TPC-C 测试"><!--[--><!--[--><!--]--><!--]-->TPC-C 测试<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/tpch-test.html" aria-label="TPC-H 测试"><!--[--><!--[--><!--]--><!--]-->TPC-H 测试<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/features/" aria-label="Kernel Features"><!--[--><!--[--><!--]--><!--]-->Kernel Features<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Theory"><span class="title">Theory</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Theory"><span class="title">Theory</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>PolarDB for PostgreSQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/arch-overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/arch-htap.html" aria-label="HTAP Architecture"><!--[--><!--[--><!--]--><!--]-->HTAP Architecture<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/PolarDB-for-PostgreSQL/theory/buffer-management.html" aria-label="Buffer Management"><!--[--><!--[--><!--]--><!--]-->Buffer Management<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/ddl-synchronization.html" aria-label="DDL Synchronization"><!--[--><!--[--><!--]--><!--]-->DDL Synchronization<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/logindex.html" aria-label="LogIndex"><!--[--><!--[--><!--]--><!--]-->LogIndex<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>PostgreSQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/analyze.html" aria-label="Code Analysis of ANALYZE"><!--[--><!--[--><!--]--><!--]-->Code Analysis of ANALYZE<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/polar-sequence-tech.html" aria-label="Sequence"><!--[--><!--[--><!--]--><!--]-->Sequence<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Dev"><span class="title">Dev</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Dev"><span class="title">Dev</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/development/dev-on-docker.html" aria-label="基于 Docker 容器开发"><!--[--><!--[--><!--]--><!--]-->基于 Docker 容器开发<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/development/customize-dev-env.html" aria-label="定制开发环境"><!--[--><!--[--><!--]--><!--]-->定制开发环境<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Contributing"><span class="title">Contributing</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Contributing"><span class="title">Contributing</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/contributing-polardb-kernel.html" aria-label="Code Contributing"><!--[--><!--[--><!--]--><!--]-->Code Contributing<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/contributing-polardb-docs.html" aria-label="Documentation Contributing"><!--[--><!--[--><!--]--><!--]-->Documentation Contributing<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/coding-style.html" aria-label="Coding Style"><!--[--><!--[--><!--]--><!--]-->Coding Style<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/trouble-issuing.html" aria-label="问题报告"><!--[--><!--[--><!--]--><!--]-->问题报告<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/PolarDB-for-PostgreSQL/theory/buffer-management.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/zh/theory/buffer-management.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/ApsaraDB/PolarDB-for-PostgreSQL" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Deployment"><span class="title">Deployment</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Deployment"><span class="title">Deployment</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/introduction.html" aria-label="架构简介"><!--[--><!--[--><!--]--><!--]-->架构简介<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/quick-start.html" aria-label="快速部署"><!--[--><!--[--><!--]--><!--]-->快速部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/deploy.html" aria-label="进阶部署"><!--[--><!--[--><!--]--><!--]-->进阶部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Preparation of Shared-Storage Device</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/storage-aliyun-essd.html" aria-label="阿里云 ECS + ESSD 云盘存储"><!--[--><!--[--><!--]--><!--]-->阿里云 ECS + ESSD 云盘存储<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Preparation of File System</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/fs-pfs.html" aria-label="格式化并挂载 PFS"><!--[--><!--[--><!--]--><!--]-->格式化并挂载 PFS<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Deploying PolarDB</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/db-localfs.html" aria-label="基于单机文件系统部署"><!--[--><!--[--><!--]--><!--]-->基于单机文件系统部署<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/db-pfs.html" aria-label="基于 PFS 文件系统部署"><!--[--><!--[--><!--]--><!--]-->基于 PFS 文件系统部署<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>More about Deployment</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/deploying/deploy-official.html" aria-label="购买商业版"><!--[--><!--[--><!--]--><!--]-->购买商业版<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Ops"><span class="title">Ops</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Ops"><span class="title">Ops</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Daily Ops</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/backup-and-restore.html" aria-label="备份恢复"><!--[--><!--[--><!--]--><!--]-->备份恢复<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/grow-storage.html" aria-label="共享存储在线扩容"><!--[--><!--[--><!--]--><!--]-->共享存储在线扩容<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/scale-out.html" aria-label="计算节点扩缩容"><!--[--><!--[--><!--]--><!--]-->计算节点扩缩容<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/ro-online-promote.html" aria-label="Replica 节点在线 Promote"><!--[--><!--[--><!--]--><!--]-->Replica 节点在线 Promote<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Benchmarks</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/tpcc-test.html" aria-label="TPC-C 测试"><!--[--><!--[--><!--]--><!--]-->TPC-C 测试<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/operation/tpch-test.html" aria-label="TPC-H 测试"><!--[--><!--[--><!--]--><!--]-->TPC-H 测试<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/features/" aria-label="Kernel Features"><!--[--><!--[--><!--]--><!--]-->Kernel Features<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Theory"><span class="title">Theory</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Theory"><span class="title">Theory</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>PolarDB for PostgreSQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/arch-overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/arch-htap.html" aria-label="HTAP Architecture"><!--[--><!--[--><!--]--><!--]-->HTAP Architecture<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/PolarDB-for-PostgreSQL/theory/buffer-management.html" aria-label="Buffer Management"><!--[--><!--[--><!--]--><!--]-->Buffer Management<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/ddl-synchronization.html" aria-label="DDL Synchronization"><!--[--><!--[--><!--]--><!--]-->DDL Synchronization<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/logindex.html" aria-label="LogIndex"><!--[--><!--[--><!--]--><!--]-->LogIndex<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>PostgreSQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/analyze.html" aria-label="Code Analysis of ANALYZE"><!--[--><!--[--><!--]--><!--]-->Code Analysis of ANALYZE<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/theory/polar-sequence-tech.html" aria-label="Sequence"><!--[--><!--[--><!--]--><!--]-->Sequence<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Dev"><span class="title">Dev</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Dev"><span class="title">Dev</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/development/dev-on-docker.html" aria-label="基于 Docker 容器开发"><!--[--><!--[--><!--]--><!--]-->基于 Docker 容器开发<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/development/customize-dev-env.html" aria-label="定制开发环境"><!--[--><!--[--><!--]--><!--]-->定制开发环境<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Contributing"><span class="title">Contributing</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Contributing"><span class="title">Contributing</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/contributing-polardb-kernel.html" aria-label="Code Contributing"><!--[--><!--[--><!--]--><!--]-->Code Contributing<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/contributing-polardb-docs.html" aria-label="Documentation Contributing"><!--[--><!--[--><!--]--><!--]-->Documentation Contributing<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/coding-style.html" aria-label="Coding Style"><!--[--><!--[--><!--]--><!--]-->Coding Style<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/contributing/trouble-issuing.html" aria-label="问题报告"><!--[--><!--[--><!--]--><!--]-->问题报告<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/PolarDB-for-PostgreSQL/theory/buffer-management.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/PolarDB-for-PostgreSQL/zh/theory/buffer-management.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/ApsaraDB/PolarDB-for-PostgreSQL" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Theory <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item active">PolarDB for PostgreSQL <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/arch-overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/arch-htap.html" aria-label="HTAP Architecture"><!--[--><!--[--><!--]--><!--]-->HTAP Architecture<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/PolarDB-for-PostgreSQL/theory/buffer-management.html" aria-label="Buffer Management"><!--[--><!--[--><!--]--><!--]-->Buffer Management<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/ddl-synchronization.html" aria-label="DDL Synchronization"><!--[--><!--[--><!--]--><!--]-->DDL Synchronization<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/logindex.html" aria-label="LogIndex"><!--[--><!--[--><!--]--><!--]-->LogIndex<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">PostgreSQL <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/analyze.html" aria-label="Code Analysis of ANALYZE"><!--[--><!--[--><!--]--><!--]-->Code Analysis of ANALYZE<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/PolarDB-for-PostgreSQL/theory/polar-sequence-tech.html" aria-label="Sequence"><!--[--><!--[--><!--]--><!--]-->Sequence<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="buffer-management" tabindex="-1"><a class="header-anchor" href="#buffer-management"><span>Buffer Management</span></a></h1><h2 id="background-information" tabindex="-1"><a class="header-anchor" href="#background-information"><span>Background Information</span></a></h2><p>In a conventional database system, the primary instance and the read-only instances are each allocated a specific amount of exclusive storage space. The read-only instances can apply write-ahead logging (WAL) records and can read and write data to their own storage. A PolarDB cluster consists of a primary node and at least one read-only node. The primary node and the read-only nodes share the same physical storage. The primary node can read and write data to the shared storage. The read-only nodes can read data from the shared storage by applying WAL records but cannot write data to the shared storage. The following figure shows the architecture of a PolarDB cluster.</p><p><img src="/PolarDB-for-PostgreSQL/assets/1_polardb_architecture-CLTo8wxL.png" alt="image.png"></p><p>The read-only nodes may read two types of pages from the shared storage:</p><ul><li><p>Future pages: The pages that the read-only nodes read from the shared storage incorporate changes that are made after the apply log sequence numbers (LSNs) of the pages. For example, the read-only nodes have applied all WAL records up to the WAL record with an LSN of 200 to a page, but the change described by the most recent WAL record with an LSN of 300 has been incorporated into the same page in the shared storage. These pages are called future pages.</p><p><img src="/PolarDB-for-PostgreSQL/assets/9_future_pages-DUznKrzC.png" alt="image.png"></p></li><li><p>Outdated pages: The pages that the read-only nodes read from the shared storage do not incorporate changes that are made before the apply LSNs of the pages. For example, the read-only nodes have applied all WAL records up to the most recent WAL record with an LSN of 200 to a page, but the change described by a previous WAL record with an LSN of 200 has not been incorporated into the same page in the shared storage. These pages are called outdated pages.</p><p><img src="/PolarDB-for-PostgreSQL/assets/6_outdated_pages-ghEWZVtB.png" alt="image.png"></p></li></ul><p>Each read-only node expects to read pages that incorporate only the changes made up to the apply LSNs of the pages on that read-only node. If the read-only nodes read outdated pages or future pages from the shared storage, you can take the following measures:</p><ul><li>To prevent outdated pages, configure the read-only nodes to apply all omitted WAL records up to the apply LSN of each page. A page may have different apply LSNs on different read-only nodes.</li><li>To prevent future pages, configure the primary node to identify how many WAL records are applied on the read-only nodes at the time when the primary node writes data to the shared storage. This is the focus of buffer management.</li></ul><p>Buffer management involves consistent LSNs. For a specific page, each read-only node needs to apply only the WAL records that are generated between the consistent LSN and the apply LSN. This reduces the time that is required to apply WAL records on the read-only nodes.</p><h2 id="terms" tabindex="-1"><a class="header-anchor" href="#terms"><span>Terms</span></a></h2><ul><li>Buffer Pool: A buffer pool is an amount of memory that is used to store frequently accessed data. In most cases, data is cached in the buffer pool as pages. In a PolarDB cluster, each compute node has its own buffer pool.</li><li>LSN: Each LSN is the unique identifier of a WAL record. LSNs globally increment.</li><li>Apply LSN: The apply LSN of a page on a read-only node marks the most recent WAL record that is applied on the read-only node for the page. Also called Replay LSN.</li><li>Oldest Apply LSN: The oldest apply LSN of a page is the smallest apply LSN among the apply LSNs of the page on all the read-only nodes.</li></ul><h2 id="flushing-control" tabindex="-1"><a class="header-anchor" href="#flushing-control"><span>Flushing Control</span></a></h2><p>PolarDB provides a flushing control mechanism to prevent the read-only nodes from reading future pages from the shared storage. Before the primary node writes a page to the shared storage, the primary node checks whether all the read-only nodes have applied the most recent WAL record of the page.</p><p><img src="/PolarDB-for-PostgreSQL/assets/42_buffer_conntrol-B6DLwXMx.png" alt="image.png"></p><p>The pages in the buffer pool of the primary node are divided into the following two types based on whether the pages incorporate the changes that are made after the apply LSNs of the pages: pages that can be flushed to the shared storage and pages that cannot be flushed to the shared storage. This categorization is based on the following LSNs:</p><ul><li>Latest LSN: The latest LSN of a page on a read-only node marks the most recent WAL record that is applied on the read-only node for the page.</li><li>Oldest apply LSN: The oldest apply LSN of a page is the smallest apply LSN among the apply LSNs of the page on all the read-only nodes.</li></ul><p>The primary node determines whether to flush a dirty page to the shared storage based on the following rules:</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code><span class="line"><span class="token keyword">if</span> buffer latest lsn <span class="token operator">&lt;=</span> oldest apply lsn</span>
<span class="line">    flush buffer</span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line">    <span class="token keyword">do</span> <span class="token operator">not</span> flush buffer</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="consistent-lsns" tabindex="-1"><a class="header-anchor" href="#consistent-lsns"><span>Consistent LSNs</span></a></h2><p>To apply the WAL records of a page up to a specified LSN, each read-only node manages the mapping between the page and the LSNs of all WAL records that are generated for the page. This mapping is stored as a LogIndex. A LogIndex is used as a hash table that can be persistently stored. When a read-only node requests a page, the read-only node traverses the LogIndex of the page to obtain the LSNs of all WAL records that need to be applied. Then, the read-only node applies the WAL records in sequence to generate the most recent version of the page.</p><p><img src="/PolarDB-for-PostgreSQL/assets/7_solution_to_outdated_pages-DDRDIaP2.png" alt="image.png"></p><p>For a specific page, more changes mean more LSNs and a longer period of time required to apply WAL records. To minimize the number of WAL records that need to be applied for each page, PolarDB provides consistent LSNs.</p><p>After all changes that are made up to the consistent LSN of a page are written to the shared storage, the page is persistently stored. The primary node sends the write LSN and consistent LSN of the page to each read-only node, and each read-only node sends the apply LSN of the page and the min used LSN of the page to the primary node. The read-only nodes do not need to apply the WAL records that are generated before the consistent LSN of the page while reading it from shared storage. But the read-only nodes may still need to apply the WAL records that are generated before the consistent LSN of the page while replaying outdated page in buffer pool. Therefore, all LSNs that are smaller than the consistent LSN and the min used LSN can be removed from the LogIndex of the page. This reduces the number of WAL records that the read-only nodes need to apply. This also reduces the storage space that is occupied by LogIndex records.</p><h3 id="flush-lists" tabindex="-1"><a class="header-anchor" href="#flush-lists"><span>Flush Lists</span></a></h3><p>PolarDB holds a specific state for each buffer in the memory. The state of a buffer in the memory is represented by the LSN that marks the first change to the buffer. This LSN is called the oldest LSN. The consistent LSN of a page is the smallest oldest LSN among the oldest LSNs of all buffers for the page.</p><p>A conventional method of obtaining the consistent LSN of a page requires the primary node to traverse the LSNs of all buffers for the page in the buffer pool. This method causes significant CPU overhead and a long traversal process. To address these issues, PolarDB uses a flush list, in which all dirty pages in the buffer pool are sorted in ascending order based on their oldest LSNs. The flush list helps you reduce the time complexity of obtaining consistent LSNs to O(1).</p><p><img src="/PolarDB-for-PostgreSQL/assets/42_FlushList-BngbHiEv.png" alt="image.png"></p><p>When a buffer is updated for the first time, the buffer is labeled as dirty. PolarDB inserts the buffer into the flush list and generates an oldest LSN for the buffer. When the buffer is flushed to the shared storage, the label is removed.</p><p>To efficiently move the consistent LSN of each page towards the head of the flush list, PolarDB runs a BGWRITER process to traverse all buffers in the flush list in chronological order and flush early buffers to the shared storage one by one. After a buffer is flushed to the shared storage, the consistent LSN is moved one position forward towards the head of the flush list. In the example shown in the preceding figure, if the buffer with an oldest LSN of 10 is flushed to the shared storage, the buffer with an oldest LSN of 30 is moved one position forward towards the head of the flush list. LSN 30 becomes the consistent LSN.</p><h3 id="parallel-flushing" tabindex="-1"><a class="header-anchor" href="#parallel-flushing"><span>Parallel Flushing</span></a></h3><p>To further improve the efficiency of moving the consistent LSN of each page to the head of the flush list, PolarDB runs multiple BGWRITER processes to flush buffers in parallel. Each BGWRITER process reads a number of buffers from the flush list and flushes the buffers to the shared storage at a time.</p><p><img src="/PolarDB-for-PostgreSQL/assets/43_parr_Flush-_B8PTLS0.png" alt="image.png"></p><h2 id="hot-buffers" tabindex="-1"><a class="header-anchor" href="#hot-buffers"><span>Hot Buffers</span></a></h2><p>After the flushing control mechanism is introduced, PolarDB flushes only the buffers that meet specific flush conditions to the shared storage. If a buffer is frequently updated, its latest LSN may remain larger than its oldest apply LSN. As a result, the buffer can never meet the flush conditions. This type of buffer is called hot buffers. If a page has hot buffers, the consistent LSN of the page cannot be moved towards the head of the flush list. To resolve this issue, PolarDB provides a copy buffering mechanism.</p><p>The copy buffering mechanism allows PolarDB to copy buffers that do not meet the flush conditions to a copy buffer pool. Buffers in the copy buffer pool and their latest LSNs are no longer updated. As the oldest apply LSN moves towards the head of the flush list, these buffers start to meet the flush conditions. When these buffers meet the flush conditions, PolarDB can flush them from the copy buffer pool to the shared storage.</p><p>The following flush rules apply:</p><ol><li>If a buffer does not meet the flush conditions, PolarDB checks the number of recent changes to the buffer and the time difference between the most recent change and the latest LSN. If the number and the time difference exceed their predefined thresholds, PolarDB copies the buffer to the copy buffer pool.</li><li>When a buffer is updated again, PolarDB checks whether the buffer meets the flush conditions. If the buffer meets the flush conditions, PolarDB flushes the buffer to the shared storage and deletes the copy of the buffer from the copy buffer pool.</li><li>If a buffer does not meet the flush conditions, PolarDB checks whether a copy of the buffer can be found in the copy buffer pool. If a copy of the buffer can be found in the copy buffer pool and the copy meets the flush conditions, PolarDB flushes the copy to the shared storage.</li><li>After a buffer that is copied to the copy buffer pool is updated, PolarDB regenerates an oldest LSN for the buffer and moves the buffer to the tail of the flush list.</li></ol><p>In the example shown in the following figure, the buffer with an oldest LSN of 30 and a latest LSN of 500 is considered a hot buffer. The buffer is updated after it is copied to the copy buffer pool. If the change is marked by LSN 600, PolarDB changes the oldest LSN of the buffer to 600 and moves the buffer to the tail of the flush list. At this time, the copy of the buffer is no longer updated, and the latest LSN of the copy remains 500. When the copy meets the flush conditions, PolarDB flushes the copy to the shared storage.</p><p><img src="/PolarDB-for-PostgreSQL/assets/44_Copy_Buffer-BLy2qaLH.png" alt="image.png"></p><p>After the copy buffering mechanism is introduced, PolarDB uses a different method to calculate the consistent LSN of each page. For a specific page, the oldest LSN in the flush list is no longer the smallest oldest LSN because the oldest LSN in the copy buffer pool can be smaller. Therefore, PolarDB needs to compare the oldest LSN in the flush list with the oldest LSN in the copy buffer pool. The smaller oldest LSN is considered the consistent LSN.</p><h2 id="lazy-checkpointing" tabindex="-1"><a class="header-anchor" href="#lazy-checkpointing"><span>Lazy Checkpointing</span></a></h2><p>PolarDB supports consistent LSNs, which are similar to checkpoints. All changes that are made to a page before the checkpoint LSN of the page are flushed to the shared storage. If a recovery operation is run, PolarDB starts to recover the page from the checkpoint LSN. This improves recovery efficiency. If regular checkpoint LSNs are used, PolarDB flushes all dirty pages in the buffer pool and other in-memory pages to the shared storage. This process may require a long period of time and high I/O throughput. As a result, normal queries may be affected.</p><p>Consistent LSNs empower PolarDB to implement lazy checkpointing. If the lazy checkpointing mechanism is used, PolarDB does not flush all dirty pages in the buffer pool to the shared storage. Instead, PolarDB uses consistent LSNs as checkpoint LSNs. This significantly increases checkpointing efficiency.</p><p>The underlying logic of the lazy checkpointing mechanism allows PolarDB to run BGWRITER processes that continuously flush dirty pages and maintain consistent LSNs. The lazy checkpointing mechanism cannot be used with the full page write feature. If you enable the full page write feature, the lazy checkpointing mechanism is automatically disabled.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/ApsaraDB/PolarDB-for-PostgreSQL/edit/POLARDB_15_STABLE/polar-doc/docs/theory/buffer-management.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page on GitHub<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 7877752+aCoder2013@users.noreply.github.com">aCoder2013</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/PolarDB-for-PostgreSQL/theory/arch-htap.html" aria-label="HTAP Architecture"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">HTAP Architecture</span></div><!--]--></a><a class="route-link auto-link next" href="/PolarDB-for-PostgreSQL/theory/ddl-synchronization.html" aria-label="DDL Synchronization"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">DDL Synchronization</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/PolarDB-for-PostgreSQL/assets/app-HZE5kvva.js" defer></script>
  </body>
</html>
